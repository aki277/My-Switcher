(function(a,r,y,s,u){"use strict";const l=r.findByProps("createElement","useState"),{View:g,TouchableOpacity:p,Image:h}=r.findByProps("View","Image","TouchableOpacity")||{},k=r.findByProps("setString");function b(){const e=Object.keys(r.modules),f=["paragraph","text","strong"];for(const c of e){const o=r.modules[c]?.publicModule?.exports;if(!o)continue;const i=function(t){if(!t)return null;const _=Object.keys(t);return f.every(function(w){return _.includes(w)})?t.fence?{rules:t,key:"fence"}:t.codeBlock?{rules:t,key:"codeBlock"}:t.code?{rules:t,key:"code"}:{rules:t,key:null}:null};let n=i(o);if(n||(n=i(o.defaultRules),n)||(n=i(o.default),n))return n}return null}let d;var m={onLoad:function(){try{const e=b();if(!e){console.error("Smart Copy: Exhausted all search options."),s.showToast("Fatal: Cannot find Markdown Engine.","ic_warning");return}if(!e.key){s.showToast("Found Parser, but no CodeBlock rule!","ic_warning");return}d=y.after("react",e.rules[e.key],function(f,c){if(!c)return c;const o=f[0],i=o.content||o.options?.content||"content_missing",n=l.createElement(p,{onPress:function(){k.setString(i),s.showToast("Copied!",u.getAssetIDByName("ic_check"))},style:{position:"absolute",right:4,top:4,backgroundColor:"rgba(32, 34, 37, 0.9)",borderRadius:4,padding:6,zIndex:99,borderColor:"rgba(255,255,255,0.1)",borderWidth:1}},l.createElement(h,{source:u.getAssetIDByName("ic_copy_message_link")||u.getAssetIDByName("ic_copy"),style:{width:16,height:16,tintColor:"#ffffff"}}));return l.createElement(g,{style:{position:"relative"}},[c,n])})}catch(e){console.error(e),s.showToast(`Crash: ${e.message}`,"ic_warning")}},onUnload:function(){d&&d()}};return a.default=m,Object.defineProperty(a,"__esModule",{value:!0}),a})({},vendetta.metro,vendetta.patcher,vendetta.ui.toasts,vendetta.ui.assets);
