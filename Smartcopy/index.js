(function(c,r,l,i,p){"use strict";const m=r.findByProps("getMessages","getMessage"),g=r.findByProps("getChannelId"),h=r.findByProps("setString"),t=/```([\s\S]+?)```/;let d;var y={onLoad:function(){d=l.registerCommand({name:"copycode",displayName:"copycode",description:"Copy code from text or embeds",displayDescription:"Copy code from text or embeds",options:[],applicationId:"-1",inputType:1,type:1,execute:function(){const f=g.getChannelId();if(!f)return i.showToast("Error: No Channel ID","ic_warning");const a=m.getMessages(f),u=a.toArray?a.toArray():Object.values(a);if(!u||u.length===0)return i.showToast("No messages found to scan.","ic_warning");const o=u.reverse().find(function(e){return e.content&&t.test(e.content)?!0:e.embeds&&e.embeds.length>0?e.embeds.some(function(n){return n.description&&t.test(n.description)?!0:n.fields?n.fields.some(function(s){return s.value&&t.test(s.value)}):!1}):!1});if(o){let e="";o.content&&t.test(o.content)?e=o.content.match(t)[1]:o.embeds&&o.embeds.forEach(function(n){n.description&&t.test(n.description)?e=n.description.match(t)[1]:n.fields&&n.fields.forEach(function(s){s.value&&t.test(s.value)&&(e=s.value.match(t)[1])})}),e?(h.setString(e.trim()),i.showToast("Copied code!",p.getAssetIDByName("ic_check"))):i.showToast("Error parsing code.","ic_warning")}else i.showToast("No code blocks found.","ic_warning")}})},onUnload:function(){d&&d()}};return c.default=y,Object.defineProperty(c,"__esModule",{value:!0}),c})({},vendetta.metro,vendetta.commands,vendetta.ui.toasts,vendetta.ui.assets);
