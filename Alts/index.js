(function(l,p,n,h,T,t,s){"use strict";const{FormSection:f,FormRow:g,FormInput:R}=T.Forms,{View:k,Image:A,Alert:v}=T.General,d=p.findByProps("getCurrentUser"),S=p.findByProps("getToken"),m=p.findByProps("switchAccountToken","login");function o(e){return e.avatar?`https://cdn.discordapp.com/avatars/${e.id}/${e.avatar}.png`:"https://cdn.discordapp.com/embed/avatars/0.png"}function E(e){e&&(s.showToast("Switching...",o({})),setTimeout(function(){m&&m.switchAccountToken?m.switchAccountToken(e):v.alert("Error","Switcher module not found.")},100))}let u=[];var C={onLoad:function(){n.storage.accounts||(n.storage.accounts=[]),u.push(h.registerCommand({name:"alt save",displayName:"alt save",description:"Save current account",displayDescription:"Save current account",execute:function(){const e=d.getCurrentUser(),r=S.getToken();if(n.storage.accounts.some(function(c){return c.id===e.id})){s.showToast("Already saved!",o(e));return}n.storage.accounts.push({id:e.id,name:e.username,avatar:o(e),token:r}),s.showToast(`Saved ${e.username}!`,o(e))},options:[],applicationId:"-1",inputType:1,type:1})),u.push(h.registerCommand({name:"alt list",displayName:"alt list",description:"List accounts",displayDescription:"List accounts",execute:function(){if(n.storage.accounts.length===0){s.showToast("No accounts saved.");return}const e=n.storage.accounts.map(function(r,c){return`${c+1}. ${r.name}`}).join(`
`);s.showToast(`Accounts:
${e}`)},options:[],applicationId:"-1",inputType:1,type:1})),u.push(h.registerCommand({name:"alt switch",displayName:"alt switch",description:"Switch account",displayDescription:"Switch account",execute:function(e){const r=e.find(function(i){return i.name==="name"})?.value?.toLowerCase(),c=n.storage.accounts.find(function(i){return i.name.toLowerCase().includes(r)});c?E(c.token):s.showToast("Account not found.")},options:[{name:"name",description:"Username",type:3,required:!0}],applicationId:"-1",inputType:1,type:1}))},onUnload:function(){for(const e of u)e();u=[]},settings:function(){const[e,r]=t.React.useState(""),[c,i]=t.React.useState(""),[P,w]=t.React.useReducer(function(a){return a+1},0),b=function(){const a=d.getCurrentUser(),y=S.getToken();if(n.storage.accounts.some(function(L){return L.id===a.id}))return v.alert("Error","Already saved.");n.storage.accounts.push({id:a.id,name:a.username,avatar:o(a),token:y}),w()};return t.React.createElement(k,{style:{flex:1}},t.React.createElement(f,{title:"Quick Actions"},t.React.createElement(g,{label:"Save Current Account",subLabel:`Log in as ${d.getCurrentUser()?.username}`,leading:t.React.createElement(A,{source:{uri:o(d.getCurrentUser())},style:{width:32,height:32,borderRadius:16}}),onPress:b})),t.React.createElement(f,{title:`Saved Accounts (${n.storage.accounts.length})`},n.storage.accounts.map(function(a,y){return t.React.createElement(g,{label:a.name,subLabel:"Tap to switch",leading:t.React.createElement(A,{source:{uri:a.avatar},style:{width:32,height:32,borderRadius:16}}),onPress:function(){v.alert("Switch Account",`Log in as ${a.name}?`,[{text:"Cancel",style:"cancel"},{text:"Switch",onPress:function(){return E(a.token)}},{text:"Delete",style:"destructive",onPress:function(){n.storage.accounts.splice(y,1),w()}}])}})})),t.React.createElement(f,{title:"Manual Add"},t.React.createElement(R,{value:e,onChange:r,placeholder:"Name"}),t.React.createElement(R,{value:c,onChange:i,placeholder:"Token",secureTextEntry:!0}),t.React.createElement(g,{label:"Add Account",disabled:!e||!c,onPress:function(){n.storage.accounts.push({id:Date.now().toString(),name:e,avatar:"https://cdn.discordapp.com/embed/avatars/0.png",token:c}),r(""),i(""),w()}})))}};return l.default=C,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.metro,vendetta.plugin,vendetta.commands,vendetta.ui.components,vendetta.metro.common,vendetta.ui.toasts);
