(function(p,h,a,f,T,t,s){"use strict";const{FormSection:v,FormRow:g,FormInput:R}=T.Forms,{View:E,Image:S,Alert:u}=T.General,l=h.findByProps("getCurrentUser"),k=h.findByProps("getToken"),m=h.findByProps("switchAccountToken");function o(e){return e.avatar?`https://cdn.discordapp.com/avatars/${e.id}/${e.avatar}.png`:"https://cdn.discordapp.com/embed/avatars/0.png"}function A(e,c){if(!e)return u.alert("Error","This account has no token saved!");m&&m.switchAccountToken?(s.showToast(`Switching to ${c}...`,o({})),m.switchAccountToken(e).catch(function(n){u.alert("Switch Failed","Discord rejected the token. The account might be invalid."),console.error(n)})):u.alert("Not Supported","Your Discord version does not support Fast Switching.")}let d=[];var b={onLoad:function(){a.storage.accounts||(a.storage.accounts=[]),d.push(f.registerCommand({name:"alt save",displayName:"alt save",description:"Save current account",displayDescription:"Save current account",execute:function(){const e=l.getCurrentUser(),c=k.getToken();if(a.storage.accounts.some(function(n){return n.id===e.id})){s.showToast("Already saved!",o(e));return}a.storage.accounts.push({id:e.id,name:e.username,avatar:o(e),token:c}),s.showToast(`Saved ${e.username}!`,o(e))},options:[],applicationId:"-1",inputType:1,type:1})),d.push(f.registerCommand({name:"alt list",displayName:"alt list",description:"List saved accounts",displayDescription:"List saved accounts",execute:function(){if(a.storage.accounts.length===0){s.showToast("No accounts saved.");return}const e=a.storage.accounts.map(function(c,n){return`${n+1}. ${c.name}`}).join(`
`);s.showToast(`Accounts:
${e}`)},options:[],applicationId:"-1",inputType:1,type:1})),d.push(f.registerCommand({name:"alt switch",displayName:"alt switch",description:"Switch account",displayDescription:"Switch account",execute:function(e){const c=e.find(function(i){return i.name==="name"})?.value?.toLowerCase(),n=a.storage.accounts.find(function(i){return i.name.toLowerCase().includes(c)});n?A(n.token,n.name):s.showToast("Account not found.")},options:[{name:"name",description:"Username",type:3,required:!0}],applicationId:"-1",inputType:1,type:1}))},onUnload:function(){for(const e of d)e();d=[]},settings:function(){const[e,c]=t.React.useState(""),[n,i]=t.React.useState(""),[L,w]=t.React.useReducer(function(r){return r+1},0),C=function(){const r=l.getCurrentUser(),y=k.getToken();if(a.storage.accounts.some(function($){return $.id===r.id}))return u.alert("Error","Already saved.");a.storage.accounts.push({id:r.id,name:r.username,avatar:o(r),token:y}),w()};return t.React.createElement(E,{style:{flex:1}},t.React.createElement(v,{title:"Quick Actions"},t.React.createElement(g,{label:"Save Current Account",subLabel:`Log in as ${l.getCurrentUser()?.username}`,leading:t.React.createElement(S,{source:{uri:o(l.getCurrentUser())},style:{width:32,height:32,borderRadius:16}}),onPress:C})),t.React.createElement(v,{title:`Saved Accounts (${a.storage.accounts.length})`},a.storage.accounts.map(function(r,y){return t.React.createElement(g,{label:r.name,subLabel:"Tap to switch",leading:t.React.createElement(S,{source:{uri:r.avatar},style:{width:32,height:32,borderRadius:16}}),onPress:function(){u.alert("Switch Account",`Log in as ${r.name}?`,[{text:"Cancel",style:"cancel"},{text:"Switch",onPress:function(){return A(r.token,r.name)}},{text:"Delete",style:"destructive",onPress:function(){a.storage.accounts.splice(y,1),w()}}])}})})),t.React.createElement(v,{title:"Manual Add"},t.React.createElement(R,{value:e,onChange:c,placeholder:"Name"}),t.React.createElement(R,{value:n,onChange:i,placeholder:"Token",secureTextEntry:!0}),t.React.createElement(g,{label:"Add Account",disabled:!e||!n,onPress:function(){a.storage.accounts.push({id:Date.now().toString(),name:e,avatar:"https://cdn.discordapp.com/embed/avatars/0.png",token:n}),c(""),i(""),w()}})))}};return p.default=b,Object.defineProperty(p,"__esModule",{value:!0}),p})({},vendetta.metro,vendetta.plugin,vendetta.commands,vendetta.ui.components,vendetta.metro.common,vendetta.ui.toasts);
